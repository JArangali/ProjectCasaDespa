@{
    ViewData["Title"] = "Profile Page";
}
@using Microsoft.AspNetCore.Identity;
@using CasaDespaDraft.Data;
@using CasaDespaDraft.ViewModels
@inject UserManager<User> _userManager;
@model ProfileViewModel

<!-- Welcome Section -->
<section id="welcome">
    <div id="welcomecontainer">
        <div id="welcomediv1">
            <h1 id="welcometext">PROFILE PAGE</h1>
        </div>
        <div id="welcomediv2">
            <img id="blkbiglogo" src="~/img/logo/blklogo.png" alt="casadespa">
        </div>
    </div>
</section>

<!-- End Welcome Section -->


<!-- Profile Page -->
<style>
    body {
        margin: 0;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #F3D6B2;
    }
</style>

<body>
    <div class="main-container">
        <div class="left-container">
            <div class="profile-section">
                <div class="profile-picture">

                    <img src="@(_userManager.GetUserAsync(User).Result.ProfilePicture != null ?
											$"data:image;base64,{Convert.ToBase64String(_userManager.GetUserAsync(User).Result.ProfilePicture)}" :
											"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png")"  alt="Profile Picture">
                </div>
                <div class="info-section">
                    <p class="info-item"><strong>NAME</strong></p>
                    <p class="info-item1">@_userManager.GetUserAsync(User).Result.Firstname @_userManager.GetUserAsync(User).Result.Lastname</p>

                    <p class="info-item"><strong>EMAIL</strong></p>
                    <p class="info-item1">@_userManager.GetUserAsync(User).Result.Email</p>

                    <p class="info-item"><strong>ADDRESS</strong></p>
                    <p class="info-item1">@_userManager.GetUserAsync(User).Result.Address</p>
                </div>
                <a href="#" class="update-button">UPDATE INFO</a>
            </div>
        </div>

        <div class="right-container">
            <div class="button-container">
                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                        <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Booking Requests</button>
                        <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Pending Payments</button>
                        <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-pending" type="button" role="tab" aria-controls="nav-pending" aria-selected="false">Archive</button>
                        
                    </div>
                </nav>
                @* <a style="background-color: #C5A485; color: black;"  class="nav-button" asp-area="" asp-controller="Home" asp-action="Profile">REQUESTS</a>
                <a class="nav-button" asp-area="" asp-controller="Home" asp-action="ProfileP">PENDING PAYMENTS</a>
                <a class="nav-button" asp-area="" asp-controller="Home" asp-action="ProfileA">APPROVED</a> *@
            </div>

            <div class="table-container" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">

                <table>

                    <thead>
                        <tr>
                            <td><div class="table-container2">FULL NAME:</div></td>
                            <th><div class="table-container2">CONTACT NUMBER:</br></div></th>
                            <th><div class="table-container2">NUMBER<BR>OF PAX:</div></th>
                            <th><div class="table-container2">DATE</div></th>
                            <th><div class="table-container2">PACKAGE</div></th>
                        </tr>
                    </thead>

                    <tbody>
                        @foreach (var booking in Model.CreatedBookings)
                        {
                            <tr>
                                <td>@booking.fullName</td>
                                <td>@booking.contactNumber</td>
                                <td>@booking.pax</td>
                                <td>@booking.date</td>
                                <td>@booking.package</td>
                                </tr>
                        }
                    </tbody>
                </table>

            </div>

                    

        </div>
    </div>
</body>

